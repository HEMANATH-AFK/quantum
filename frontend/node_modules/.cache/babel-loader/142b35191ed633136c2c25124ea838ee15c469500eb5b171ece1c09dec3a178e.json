{"ast":null,"code":"import axios from\"axios\";import React,{useContext,useEffect,useReducer}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{Row,Col,ListGroup,Card,Badge,Button}from\"react-bootstrap\";import Rating from\"../components/Rating\";import{Helmet}from\"react-helmet-async\";import Loading from\"../components/Loading\";import{getError}from\"../utils\";import{Store}from\"../Store\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const reducer=(state,action)=>{switch(action.type){case\"FETCH_REQUEST\":return{...state,loading:true};case\"FETCH_SUCCESS\":return{...state,product:action.payload,loading:false};case\"FETCH_FAIL\":return{...state,loading:false,error:action.payload};default:return state;}};function ProductScreen(){const navigate=useNavigate();const params=useParams();const{slug}=params;const[{loading,error,product},dispatch]=useReducer(reducer,{product:[],loading:true,error:\"\"});useEffect(()=>{const fetchData=async()=>{dispatch({type:\"FETCH_REQUEST\"});try{const result=await axios.get(`/api/products/slug/${slug}`);dispatch({type:\"FETCH_SUCCESS\",payload:result.data});}catch(err){dispatch({type:\"FETCH_FAIL\",payload:getError(err)});}};fetchData();},[slug]);const{state,dispatch:ctxDispatch}=useContext(Store);const{cart}=state;const addToCartHandler=async()=>{const existItem=cart.cartItems.find(x=>x._id===product._id);const quantity=existItem?existItem.quantity+1:1;const{data}=await axios.get(`/api/products/${product._id}`);if(data.countInStock<quantity){window.alert('Sorry. Product is out of stock');return;}ctxDispatch({type:'CART_ADD_ITEM',payload:{...product,quantity}});navigate('/cart');};return loading?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(\"div\",{children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[\" \",/*#__PURE__*/_jsx(\"img\",{className:\"img-large\",src:product.image,alt:product.name}),\" \"]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:product.name})}),/*#__PURE__*/_jsx(\"h1\",{children:product.name})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{rating:product.rating,reviews:product.reviews,children:\" \"})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"price: \",/*#__PURE__*/_jsxs(\"b\",{children:[\"\\u20B9\",product.price]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: \",/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Price:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",product.price]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:product.countInStock>0?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"In Stock\"}):/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"Unavailable\"})})]})}),product.countInStock>0&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:addToCartHandler,children:\"Add to Cart\"})})})]})})})})]})});}export default ProductScreen;","map":{"version":3,"names":["axios","React","useContext","useEffect","useReducer","useNavigate","useParams","Row","Col","ListGroup","Card","Badge","Button","Rating","Helmet","Loading","getError","Store","jsx","_jsx","jsxs","_jsxs","reducer","state","action","type","loading","product","payload","error","ProductScreen","navigate","params","slug","dispatch","fetchData","result","get","data","err","ctxDispatch","cart","addToCartHandler","existItem","cartItems","find","x","_id","quantity","countInStock","window","alert","children","md","className","src","image","alt","name","variant","Item","rating","reviews","price","description","Body","bg","onClick"],"sources":["C:/Users/KALAI/Desktop/Quantum/frontend/src/screens/ProductScreen.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useContext, useEffect, useReducer } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { Row, Col, ListGroup, Card, Badge, Button } from \"react-bootstrap\";\r\nimport Rating from \"../components/Rating\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport Loading from \"../components/Loading\";\r\nimport { getError } from \"../utils\";\r\nimport { Store } from \"../Store\";\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_REQUEST\":\r\n      return { ...state, loading: true };\r\n    case \"FETCH_SUCCESS\":\r\n      return { ...state, product: action.payload, loading: false };\r\n    case \"FETCH_FAIL\":\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction ProductScreen(){\r\n  const navigate = useNavigate();\r\n    const params = useParams();\r\n    const {slug} = params;\r\n\r\n      const [{ loading, error, product }, dispatch] = useReducer(reducer, {\r\n    product: [],\r\n    loading: true,\r\n    error: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      dispatch({ type: \"FETCH_REQUEST\" });\r\n      try {\r\n        const result = await axios.get(`/api/products/slug/${slug}`);\r\n        dispatch({ type: \"FETCH_SUCCESS\", payload: result.data });\r\n      } catch (err) {\r\n        dispatch({ type: \"FETCH_FAIL\", payload: getError(err)});\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [slug]);\r\n\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\nconst { cart } = state;\r\n\r\n    const addToCartHandler = async () => {\r\n      const existItem = cart.cartItems.find((x) => x._id === product._id);\r\n      const quantity = existItem ? existItem.quantity + 1 : 1;\r\n      const { data } = await axios.get(`/api/products/${product._id}`);\r\n      if (data.countInStock < quantity) {\r\n        window.alert('Sorry. Product is out of stock');\r\n        return;\r\n      }\r\n      ctxDispatch({\r\n        type: 'CART_ADD_ITEM',\r\n        payload: { ...product, quantity },\r\n      });\r\n      navigate('/cart');\r\n    };\r\n\r\n    \r\nreturn loading ? (\r\n    <Loading />\r\n) : error ? (\r\n    <div>{error}</div>\r\n) : (\r\n    <div>\r\n        {<Row>\r\n            <Col md={6}> <img className=\"img-large\" src={product.image} alt={product.name}></img> </Col>\r\n\r\n            <Col md={3}><ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <Helmet>\r\n                    <title>{product.name}</title>\r\n                  </Helmet>\r\n                  <h1>{product.name}</h1>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Rating rating={product.rating} reviews={product.reviews}> </Rating>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  price: <b>â‚¹{product.price}</b>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  Description: <p>{product.description}</p>\r\n                </ListGroup.Item>\r\n              </ListGroup></Col>\r\n            <Col md={3}>\r\n            <Card>\r\n              <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Price:</Col>\r\n                    <Col>${product.price}</Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <Row>\r\n                    <Col>Status:</Col>\r\n                    <Col>\r\n                      {product.countInStock > 0 ? (\r\n                        <Badge bg=\"success\">In Stock</Badge>\r\n                      ) : (\r\n                        <Badge bg=\"danger\">Unavailable</Badge>\r\n                      )}\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n\r\n                {product.countInStock > 0 && (\r\n                  <ListGroup.Item>\r\n                    <div className=\"d-grid\">\r\n                      <Button variant=\"primary\" onClick={addToCartHandler}>\r\n                        Add to Cart\r\n                      </Button>\r\n                    </div>\r\n                  </ListGroup.Item>\r\n                )}\r\n              </ListGroup>                \r\n              </Card.Body>\r\n            </Card>\r\n            </Col>\r\n\r\n        </Row> }\r\n    </div>\r\n)\r\n}\r\nexport default ProductScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}